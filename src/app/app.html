<div class="container">
  <header class="header">
    <h1>üìù Todo App</h1>
    <p class="subtitle">S·ª≠ d·ª•ng SignalStore & rxMethod</p>
  </header>

  <!-- Loading indicator -->
  @if (store.isLoading()) {
  <div class="loading">ƒêang t·∫£i...</div>
  }

  <!-- Search box -->
  <div class="search-box">
    <input
      type="text"
      placeholder="üîç T√¨m ki·∫øm todo..."
      [value]="searchInput()"
      (input)="onSearchChange($any($event.target).value)"
      class="search-input"
    />
  </div>

  <!-- Add todo form -->
  <div class="add-todo">
    <input
      type="text"
      placeholder="Th√™m c√¥ng vi·ªác m·ªõi..."
      [value]="newTodoTitle()"
      (input)="newTodoTitle.set($any($event.target).value)"
      (keyup.enter)="addTodo()"
      class="todo-input"
    />
    <button (click)="addTodo()" class="btn-add">Th√™m</button>
  </div>

  <!-- Filter tabs -->
  <div class="filters">
    <button
      [class.active]="store.filter() === 'all'"
      (click)="store.setFilter('all')"
      class="filter-btn"
    >
      T·∫•t c·∫£ ({{ store.totalCount() }})
    </button>
    <button
      [class.active]="store.filter() === 'active'"
      (click)="store.setFilter('active')"
      class="filter-btn"
    >
      ƒêang l√†m ({{ store.activeCount() }})
    </button>
    <button
      [class.active]="store.filter() === 'completed'"
      (click)="store.setFilter('completed')"
      class="filter-btn"
    >
      Ho√†n th√†nh ({{ store.completedCount() }})
    </button>
  </div>

  <!-- Todo list -->
  <div class="todo-list">
    @if (store.filteredTodos().length === 0) {
    <div class="empty-state">
      @if (store.searchTerm()) {
      <p>Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ cho "{{ store.searchTerm() }}"</p>
      } @else {
      <p>Ch∆∞a c√≥ c√¥ng vi·ªác n√†o</p>
      }
    </div>
    } @else { @for (todo of store.filteredTodos(); track todo.id) {
    <div class="todo-item" [class.completed]="todo.completed">
      <input
        type="checkbox"
        [checked]="todo.completed"
        (change)="store.toggleTodo(todo.id)"
        class="todo-checkbox"
      />
      <span class="todo-title">{{ todo.title }}</span>
      <button (click)="store.deleteTodo(todo.id)" class="btn-delete">‚úï</button>
    </div>
    } }
  </div>

  <!-- Actions -->
  @if (store.completedCount() > 0) {
  <div class="actions">
    <button (click)="store.clearCompleted()" class="btn-clear">
      X√≥a ƒë√£ ho√†n th√†nh ({{ store.completedCount() }})
    </button>
  </div>
  }
</div>
